# 4-1. 고객 환불 확인서 — 확인·결정 항목

이 양식은 **약관/동의서 형식이 아니라** 환불 요청·처리 확인용 **기록·확인 양식**입니다.  
작업 전 아래 항목에 답변해 주시면, 그에 맞춰 입력 화면·PDF·데이터 구조를 설계하겠습니다.

---

## 1. 문서 ID (RAL-Store code-YYYYMMDD-000)

- **storecode**: 다른 양식과 동일하게 `storeId` 사용해도 될까요?
- **000** 자리: 데모에서는 001 고정으로 둬도 될까요?

**답변:**

네.

**정리:** 문서 ID **RAL-{storeId}-YYYYMMDD-001**. storecode = `storeId`, 데모 001 고정.

---

## 2. 고객 정보 (고객명, 회원번호, 연락처, 이메일)

체크리스트: 고객명, 회원번호, 연락처, 이메일(선택).

- **데이터 출처**: 전부 **POS에서 주입**(선택 고객 기준)? 일부 **직접 입력**?
- **고객명**: 다른 양식처럼 **실명 우선**(입력화면에서 입력한 실명 → 없으면 POS 회원명) 적용할까요?
- **연락처**: 국가번호(852/853/86) + 전화번호 형태로 할까요, 아니면 **단일 전화번호** 필드만?
- **이메일**: 선택 항목 — 입력 화면에서 **비워 둘 수 있게** 할까요?

**답변:**

이건 지금까지와 동일한 패턴으로 진행해줘. (전자양식은 통일하도록 제안할 예정)

**정리:** 고객정보 = 다른 양식과 동일 (이름 실명 우선, Title, 회원번호, 연락처 국가번호+전화, 이메일 선택).

---

## 3. 환불 상세 내역 (송장 번호, 송장 일자, 환불 금액, 반환 제품, 반환 사유)

- **데이터 출처**: 전부 **직원/매장 입력**으로 할까요? (POS에서 일부 자동 주입되는 항목이 있나요?)
- **송장 일자**: 날짜 선택(피커)만? 아니면 **텍스트 입력**도 허용?
- **환불 금액**: 숫자만? **통화 기호/소수점** 표시 규칙(예: HK$ 1,234.00)이 있나요?
- **반환 제품**: **한 줄 텍스트**? **여러 줄(textarea)**? 또는 **제품 목록(테이블)** 형태?

**답변:**

반품사유를 제외하고 나머지는 모두 POS의 데이터를 가져와야해.
레이어 팝업으로 구성할거야.
통화코드는 HKD 로 표시하면 될거야.
일단 양식처럼 한번에 하나의 제품만 선택할 수 있도록 구성해줘. (나중에 고객이랑 협의가 필요)
샘플데이터 (window.HKPOS.SAMPLE_SALES)를 통해 선택하는 UI만 표시하면 될거 같아.
다만 레이어 팝업에 영업일자를 선택할 수 있는 검색조건이 있었으면 좋겠어. 모든 데이터를 노출하는것 보다 일자를 선택해야 범위가 줄어들거같아.
기본값은 오늘날짜로 지정하면 될거야.
반품사유는 직접 입력가능하도록 구현해줘.

**정리:** 송장 번호·송장 일자·환불 금액·반환 제품 = **레이어 팝업**에서 **SAMPLE_SALES** 기준 선택. 팝업에 **영업일자(날짜)** 검색 조건, 기본값 오늘. **한 건만** 선택(제품 1개). 통화 HKD. 반품사유 = 직접 입력.

---

## 4. 환불 방법 선택 (현금 / 계좌 이체)

- **선택 방식**: **현금**과 **계좌 이체** 중 **하나만 선택**(라디오)으로 할까요? 아니면 **둘 다 체크 가능**(체크박스)?
- **계좌 이체 하위 선택**: VISA, MASTER, AE, CUP, WeChat Pay, AliPay, **기타(직접 입력)** — **기타** 선택 시 **직접 입력 필드**를 노출할까요? 입력값 최대 길이/형식 제한이 있나요?

**답변:**
홍콩의 업무방식을 나도 잘 모르지만 체크박스니까 복수선택 가능하게 하면 될거 같고, Other 우측의 조건부 입력도 01-01의 조건부 입력 구성을 참고해줘.

**정리:** 환불 방법 = **체크박스 복수 선택**. 계좌 이체 하위: VISA, MASTER, AE, CUP, WeChat Pay, AliPay, **기타**(선택 시 01-01처럼 조건부 직접 입력 노출).


---

## 5. 환불 확인 문구 (체크 + 금액 입력)

체크리스트:
- "현금 환불 $___ 수령 확인" (체크박스 + 금액 입력)
- "원래 결제 수단으로 $___ 환불 예정 확인" (체크박스 + 금액 입력)

- **표시 방식**: **환불 방법**(현금/계좌 이체)에 따라 **해당 문구만** 보여줄까요? 아니면 **두 문구 모두** 항상 노출하고, 선택한 방법에 해당하는 것만 체크·금액 입력 가능하게 할까요?
- **금액 필드**: 위 두 문구에 **각각 금액 입력**이 필요한가요? 아니면 **환불 상세 내역의 "환불 금액"**을 그대로 쓰고, 확인 문구에는 **체크만** 넣을까요?

**답변:**
둘다 노출하고 체크하게 하면 될거 같아. 
체크된 부분에 금액을 기본적으로 입력해주고 수정가능하도록 만들어줘. (환불금액이 다를수도 있음)
체크가 풀리면 해당 라인의 금액정보 초기화

**정리:** 두 문구 **모두 노출**. 체크 시 해당 라인 금액 필드 **환불 금액으로 기본 입력**, 수정 가능. 체크 해제 시 해당 라인 금액 **초기화**.


---

## 6. 2페이지 구성

원본: 2페이지 (-1.png, -2.png).

- **1페이지**: 어떤 블록까지 넣을까요? (예: 제목·관리 정보·고객 정보·환불 상세 내역)
- **2페이지**: 환불 방법·확인 문구·서명·Date/Time만? 원본 이미지 기준으로 **페이지 구분선**이 어디인지 알려주시면 반영하겠습니다.
- **PDF에서 페이지 강제 나눔**: 특정 섹션(예: "환불 방법" 앞)에서 **강제 페이지 나눔**을 넣을까요?

**답변:**
양식의 여백을 생각하면 2 페이지의 내용을 한페이지로 구성할 수 있을것으로 예상되는데, 이부분 고려해줘.

**정리:** PDF는 **1페이지** 목표(여백·간격 조정으로 2페이지 분량을 1페이지에 수용). 원본 2페이지를 한 장에 배치.


---

## 7. 매장 / 담당 직원

- **입력 화면**: 다른 양식처럼 **Store Registration**, **Responsible Staff** 표시할까요?
- **PDF**: 원본에 매장/담당 직원이 있나요? 있으면 동일 위치에, 없으면 **미표시**로 할까요?

**답변:**
실제 POS를 통해 업무가 이루어지기 때문에 양식에 없는거 표시하지 않아도 괜찮아.

**정리(수정):** 매장/담당 직원 = **입력 화면에서는 표시** (다른 양식과 동일하게 Store Registration, Responsible Staff 노출). **PDF만 미표시** (원본에 없음, POS에서 처리).


---

## 8. 서명 및 Date/Time

- **Date/Time**: "서명 시 Date/Time 자동 생성" — 다른 양식처럼 **서명 완료 시점**에 자동 채울까요? 입력 화면에는 **미리 보기용**만 표시?
- **서명**: 2페이지 하단에 **서명란 1개**면 충분한가요?

**답변:**

다른양식과 입력화면에서는 서명 필요없이 공통으로 사용하는 서명정보 이용할거야.

**정리:** 서명·Date/Time = 다른 양식과 동일(공통 서명 정보, 입력 화면에는 서명란 없음, PDF/최종 확인 시 반영).


---

## 9. 데모용 "자동 생성" 버튼

- **자동 생성** 버튼을 두어, 고객 정보·환불 내역(예시)·환불 방법·확인 체크·금액 등을 한 번에 채울까요?

**답변:**
만들어줘.

**정리:** **자동 생성** 버튼 제공(데모용). 고객 정보·환불 내역·환불 방법·확인 체크·금액 등 한 번에 채움.


---

## 10. 언어

- 원본이 English Version인데, 이 양식은 **영문만** 사용할지, **중문/영문 전환**이 필요한지?

**답변:**
영어만 고려하면 됨.

**정리:** 데모는 **영문만** 사용.

---

## 작업 가능 여부

위 답변·정리만으로 **입력 폼·PDF·form-handler·레이어 팝업(SAMPLE_SALES + 날짜 필터)** 구현 가능합니다. 추가로 정해야 할 점이 생기면 구현 중에 질문드리겠습니다.

