# 2-5. 시술 전환 확인서 — 확인·결정 항목

작업 전 아래 항목에 답변해 주시면, 그에 맞춰 입력 화면·PDF·데이터 구조를 설계하겠습니다.

---

## 1. 양도 회원 / 수령 회원 (두 명 처리)

현재 플로우에는 **한 명(현재 고객)**만 있습니다. **양도 회원**(전환하는 사람) / **수령 회원**(전환받는 사람)을 어떻게 채울지 정해야 합니다.

- 현재 고객을 **수령 회원**으로 고정하고, **양도 회원**만 수동 입력?
- 현재 고객을 **양도 회원**으로 고정하고, **수령 회원**만 수동 입력?
- 둘 다 수동 입력? (현재 고객은 사용하지 않음)
- 회원번호·회원명은 둘 다 **직접 입력**인지, 한 명이라도 POS/회원 검색으로 가져오는지?

**답변:**
최초 선택한 고객은 양도 회원으로 간주합니다.
수령 회원은 별도로 선택하는 화면이 필요합니다. * 레이어 팝업형태
수동입력은 고려하지 고려할 필요 없음.

---

## 2. 시술 상세 내역 테이블 (항목 / 횟수·가치 / 만료일)

- **데이터 출처**: POS에서 선택한 패키지/시술을 자동으로 넣는지, 전부 **수동 입력**인지?
- **행 개수**: 고정 행 수(예: 3행)인지, **행 추가/삭제**가 가능한지?
- 열은 체크리스트대로 **시술 항목, 횟수/가치, 만료일**만 쓰면 되는지, 추가 열이 필요한지?

**답변:**
POS에서 조회합니다.
회원검색 후 보유한 패키지 목록을 조회하는 기능이 있습니다.
이 데이터를 POS에서 조회하여 선택할 수 있어야 합니다. (별도의 화면) * 레이어 팝업형태
패키지는 2개 이상 선택할 수 있어야 합니다.

---

## 3. 문서 ID (TCAL-storecode-YYYYMMDD-000)

- **storecode**: 로그인한 매장 코드(`currentStaff.storeCode` 또는 `storeId`) 사용해도 되는지?
- **000** 자리: 실제로는 API/DB에서 일련번호 부여 예정인지, 당분간 데모용 고정값(예: 001)으로 둬도 되는지?

**답변:**
storeid 를 사용합니다. (HK000005 형태)
자리수는 오늘날짜 + 매장코드 + 순번으로 증가하며 데모는 001로 표시해도 괜찮습니다. 

---

## 4. 서명

- 서명은 **한 명만** 받나요, **양도·수령 각각** 받나요?
- 한 명만이라면, **수령 회원만** 서명하는지?

**답변:**
양도하는 사람만 서명합니다. (기존방식과 동일함)

---

## 5. 매장/담당자

- 다른 양식처럼 **로그인한 매장·담당 직원**을 그대로 쓰면 되는지 (상단 또는 하단에 Store / Responsible Staff 표시)?

**답변:**
기존과 같이 양식선택할때 선택한 담당직원을 표시하면 됩니다.

---

## 6. 언어

- 원본이 English Version인데, 이 양식은 **영문만** 사용할지, **중문/영문 전환**이 필요한지?

**답변:**
중문 양식도 있지만, 데모에서는 영문만 사용합니다.

---

## 추가 확인 질문 (개발자 → 귀하)

아래만 확인해 주시면 02-05 설계·구현에 반영하겠습니다.

### A. 수령 회원 선택 레이어 — 호출 시점

수령 회원 선택 레이어는 **언제** 띄우나요?

- **(1)** 02-05 폼(내용입력 탭) 안에서, "수령 회원 선택" 버튼을 눌렀을 때 폼 위에 레이어로 띄우기  
- **(2)** 양식 선택 단계(2단계)에서, 02-05를 선택하면 그 시점에 수령 회원 선택 레이어/화면을 먼저 띄우기  

**답변:**
양식 폼 안쪽에 버튼을 눌렀을때 띄웠으면 좋겠어.



### B. 패키지 선택 레이어 — 대상 회원

시술 상세 내역은 **양도 회원(최초 선택한 고객)**이 보유한 패키지 목록을 POS에서 조회한 뒤, 그 목록에서 2개 이상 선택하는 형태로 이해했는데 맞나요?  
(수령 회원의 패키지가 아니라, 양도하는 사람의 패키지를 전환 대상으로 선택)

**답변:**
양도할 사람이 보유한 패키지만 처리함. (보유하지 않은 패키지를 양도할 수 없음)
사전에 POS 에서 패키지보유 정보는 관리할 예정임.



### C. 문서 ID 형식

체크리스트에는 `TCAL-storecode-YYYYMMDD-000` 입니다.  
다음처럼 적용해도 될까요?

- **예시**: `TCAL-HK000005-20260130-001`  
  (TCAL- + storeId + YYYYMMDD + 순번 001, 데모는 순번 001 고정)

**답변:**
예시처럼 만들어주면 문제 없음.




### D. 데모 환경에서 POS/회원·패키지 조회

현재 데모는 샘플 데이터(config.js, localStorage)만 있습니다.

- **수령 회원 선택**: 당분간 **샘플 회원 목록(고정)**을 레이어에 띄우고, "선택" 시 그 회원 정보만 폼에 넣는 방식으로 구현해도 될까요?  
- **패키지 선택**: 당분간 **양도 회원용 샘플 패키지 목록(고정)**을 레이어에 띄우고, 다중 선택 시 테이블에 채우는 방식으로 구현해도 될까요?  
- 추후 실제 POS API 연동 시, 같은 UI(레이어)만 유지하고 데이터 소스만 API로 교체하는 전제로 진행해도 될까요?

**답변:**
샘플 회원 목록을 활용하면 됩니다.
패키지 선택은 이해한것과 같이 구현하면 됩니다. 실제로 데이터의 변경은 POS 에서 처리합니다. (향후에서 직접 수정되지 않음)

---

*위 추가 답변까지 반영해 주시면, 02-05 폼·PDF·레이어 플로우 작업을 진행하겠습니다.*
