{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "HK POS eSignature - Form Data Schemas",
  "description": "양식별 주입(inject)/수집(collect) 데이터 스키마 참고. 실제 구현은 assets/form-handler.js 및 각 양식 HTML의 data-field 기준.",
  "common_inject": {
    "description": "모든 양식에 공통으로 주입되는 필드 (form-handler sendDataToForm 기준)",
    "fields": {
      "store-registration": { "type": "string", "desc": "매장명 (POS/직원 정보)" },
      "responsible-staff": { "type": "string", "desc": "담당 BC 이름" },
      "brand-name": { "type": "string", "desc": "브랜드명" },
      "brand-logo-filename": { "type": "string", "desc": "로고 이미지 파일명" },
      "customer-name": { "type": "string", "desc": "고객명 (일부 양식은 실명 우선으로 덮어씀)" },
      "membership-number": { "type": "string", "desc": "회원번호" },
      "title": { "type": "string", "desc": "호칭 (Ms/Mrs/Mr)" },
      "country-code": { "type": "string", "desc": "국가번호 (852/853/86)" },
      "contact-number": { "type": "string", "desc": "연락처" },
      "email": { "type": "string", "desc": "이메일" },
      "signature-date": { "type": "string", "desc": "서명일 (YYYY-MM-DD 등)" },
      "signature-time": { "type": "string", "desc": "서명 시각" }
    }
  },
  "forms": {
    "member-consultation": {
      "title": "01-01 회원 상담표",
      "file": "forms/01-01_form_member-consultation.html",
      "inject_extra": {},
      "collect": {
        "description": "양식 내 data-field 기반 수집. 상세는 forms/01-01_form_member-consultation.html, forms/pdf/01-01_pdf_*.html 참고",
        "fields": [
          "store-registration", "responsible-staff", "brand-name", "customer-name", "membership-number",
          "title", "country-code", "contact-number", "email", "signature-date", "signature-time", "signature-image",
          "facial-frequency", "treatment-type", "treatment-type-others", "medical-aesthetic", "medical-aesthetic-details",
          "continuous-treatment", "recent-treatment-date", "medication-products", "medication-products-details",
          "medication-duration-from", "medication-duration-to", "body-frequency", "body-treatment-type", "body-areas",
          "massage-pressure", "massage-pressure-others", "pregnancy-status", "injuries", "injuries-details",
          "surgeries", "surgeries-details", "long-term-medication", "long-term-medication-details",
          "allergies", "allergies-details", "chronic-conditions", "chronic-conditions-others", "device-conditions",
          "exercise", "smoking", "sleep-quality", "sleep-duration", "sleep-time-from", "sleep-time-to", "sleep-issues",
          "diet-preference", "tea-coffee", "alcohol", "water-intake", "confirmation-checkbox"
        ],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "brand-name": { "type": "string", "desc": "브랜드명 (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 (주입값·실명)" },
          "membership-number": { "type": "string", "desc": "회원번호 (주입값 유지)" },
          "title": { "type": "string", "desc": "호칭 Ms/Mrs/Mr" },
          "country-code": { "type": "string", "desc": "국가번호 852/853/86" },
          "contact-number": { "type": "string", "desc": "연락처" },
          "email": { "type": "string", "desc": "이메일" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "facial-frequency": { "type": "string", "desc": "얼굴 관리 빈도 (라디오)" },
          "treatment-type": { "type": "string", "desc": "시술 유형 (라디오)" },
          "treatment-type-others": { "type": "string", "desc": "시술 유형 기타 입력" },
          "medical-aesthetic": { "type": "string", "desc": "의료 미용 시술 이력 (라디오)" },
          "medical-aesthetic-details": { "type": "string", "desc": "의료 미용 상세 입력" },
          "continuous-treatment": { "type": "string", "desc": "지속 치료 필요 (라디오)" },
          "recent-treatment-date": { "type": "string", "desc": "최근 시술일 (화면 날짜 선택)" },
          "medication-products": { "type": "string", "desc": "약물/제품 사용 (라디오)" },
          "medication-products-details": { "type": "string", "desc": "약물/제품 상세 입력" },
          "medication-duration-from": { "type": "string", "desc": "약물 복용 기간 시작 (화면 날짜)" },
          "medication-duration-to": { "type": "string", "desc": "약물 복용 기간 종료 (화면 날짜)" },
          "body-frequency": { "type": "string", "desc": "신체 관리 빈도 (라디오)" },
          "body-treatment-type": { "type": "string", "desc": "신체 시술 유형" },
          "body-areas": { "type": "string", "desc": "관리 부위 (체크박스)" },
          "massage-pressure": { "type": "string", "desc": "마사지 압력 선호 (라디오)" },
          "massage-pressure-others": { "type": "string", "desc": "마사지 압력 기타" },
          "pregnancy-status": { "type": "string", "desc": "임신 상태 (라디오)" },
          "injuries": { "type": "string", "desc": "부상/수술 이력 (라디오)" },
          "injuries-details": { "type": "string", "desc": "부상/수술 상세" },
          "surgeries": { "type": "string", "desc": "수술 이력 (라디오)" },
          "surgeries-details": { "type": "string", "desc": "수술 상세" },
          "long-term-medication": { "type": "string", "desc": "장기 복용약 (라디오)" },
          "long-term-medication-details": { "type": "string", "desc": "장기 복용약 상세" },
          "allergies": { "type": "string", "desc": "알레르기 (라디오)" },
          "allergies-details": { "type": "string", "desc": "알레르기 상세" },
          "chronic-conditions": { "type": "string", "desc": "만성 질환 (라디오)" },
          "chronic-conditions-others": { "type": "string", "desc": "만성 질환 기타" },
          "device-conditions": { "type": "string", "desc": "미용 기기 금기 27항 (체크박스)" },
          "exercise": { "type": "string", "desc": "운동 (라디오)" },
          "smoking": { "type": "string", "desc": "흡연 (라디오)" },
          "sleep-quality": { "type": "string", "desc": "수면 품질 (라디오)" },
          "sleep-duration": { "type": "string", "desc": "수면 시간" },
          "sleep-time-from": { "type": "string", "desc": "취침 시각" },
          "sleep-time-to": { "type": "string", "desc": "기상 시각" },
          "sleep-issues": { "type": "string", "desc": "수면 문제 (체크박스)" },
          "diet-preference": { "type": "string", "desc": "식단 선호 (라디오)" },
          "tea-coffee": { "type": "string", "desc": "차/커피 (라디오)" },
          "alcohol": { "type": "string", "desc": "음주 (라디오)" },
          "water-intake": { "type": "string", "desc": "수분 섭취" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" }
        }
      }
    },
    "device-consent-aqua-peel": {
      "title": "02-01 미용기기 동의서 - Aqua Peel",
      "file": "forms/02-01_form_device-consent-aqua-peel.html",
      "inject_extra": {},
      "collect": {
        "description": "Part별 동의·개인정보",
        "fields": ["store-registration", "responsible-staff", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 (주입값·실명)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "device-consent-skincool": {
      "title": "02-02 미용기기 동의서 - Skincool",
      "file": "forms/02-02_form_device-consent-skincool.html",
      "inject_extra": {},
      "collect": {
        "description": "Part별 동의·개인정보",
        "fields": ["store-registration", "responsible-staff", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 (주입값·실명)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "device-consent-ultrasonic": {
      "title": "02-03 미용기기 동의서 - Ultrasonic",
      "file": "forms/02-03_form_device-consent-ultrasonic.html",
      "inject_extra": {},
      "collect": {
        "description": "Part별 동의·개인정보",
        "fields": ["store-registration", "responsible-staff", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 (주입값·실명)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "device-consent-mrv": {
      "title": "02-04 미용기기 동의서 - MRV",
      "file": "forms/02-04_form_device-consent-mrv.html",
      "inject_extra": {},
      "collect": {
        "description": "Part별 동의·개인정보",
        "fields": ["store-registration", "responsible-staff", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 (주입값·실명)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "treatment-conversion": {
      "title": "02-05 시술 전환 확인서",
      "file": "forms/02-05_form_treatment-conversion.html",
      "inject_extra": {
        "document-id": { "type": "string", "desc": "TCAL-{storeId}-YYYYMMDD-001" },
        "transfer-member-no": { "type": "string", "desc": "양도 회원 번호" },
        "transfer-member-name": { "type": "string", "desc": "양도 회원명 (실명 우선)" },
        "transfer-member-packages": { "type": "array", "desc": "양도 회원 패키지 목록" },
        "receiving-member-candidates": { "type": "array", "desc": "수령 회원 후보 [{ id, name }]" }
      },
      "collect": {
        "description": "수령 회원·패키지 선택·동의",
        "fields": ["document-id", "store-registration", "responsible-staff", "transfer-member-no", "transfer-member-name", "receiving-member-no", "receiving-member-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "document-id": { "type": "string", "desc": "문서 ID TCAL-{storeId}-YYYYMMDD-001 (주입값 유지)" },
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "transfer-member-no": { "type": "string", "desc": "양도 회원 번호 (주입값 유지)" },
          "transfer-member-name": { "type": "string", "desc": "양도 회원명 실명 (주입값 유지)" },
          "receiving-member-no": { "type": "string", "desc": "수령 회원 번호 (화면 선택)" },
          "receiving-member-name": { "type": "string", "desc": "수령 회원명 (화면 선택)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "treatment-extension": {
      "title": "02-06 시술 연기 확인서",
      "file": "forms/02-06_form_treatment-extension.html",
      "inject_extra": {
        "document-id": { "type": "string", "desc": "TEAL-{storeId}-YYYYMMDD-001" },
        "member-no": { "type": "string", "desc": "회원번호" },
        "member-name": { "type": "string", "desc": "회원명 (실명 우선)" },
        "store-location": { "type": "string", "desc": "매장 위치(매장명)" },
        "extension-packages": { "type": "array", "desc": "연장 대상 패키지 목록" }
      },
      "collect": {
        "description": "연장 대상·동의",
        "fields": ["document-id", "store-registration", "responsible-staff", "member-no", "member-name", "store-location", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "document-id": { "type": "string", "desc": "문서 ID TEAL-{storeId}-YYYYMMDD-001 (주입값 유지)" },
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "member-no": { "type": "string", "desc": "회원번호 (주입값 유지)" },
          "member-name": { "type": "string", "desc": "회원명 실명 (주입값 유지)" },
          "store-location": { "type": "string", "desc": "매장 위치/매장명 (주입값 유지)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "package-terms": {
      "title": "03-01 구매 시술 패키지 및 제품 패키지 약관",
      "file": "forms/03-01_form_package-terms.html",
      "inject_extra": { "customer-name": { "type": "string", "desc": "실명 우선으로 덮어씀" } },
      "collect": {
        "description": "개인정보·동의 체크",
        "fields": ["store-registration", "responsible-staff", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 실명 (주입값 유지)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "collagen-drink-terms": {
      "title": "03-02 구매 Collagen Drink 약관",
      "file": "forms/03-02_form_collagen-drink-terms.html",
      "inject_extra": { "customer-name": { "type": "string", "desc": "실명 우선으로 덮어씀" } },
      "collect": {
        "description": "개인정보·동의 체크",
        "fields": ["store-registration", "responsible-staff", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 실명 (주입값 유지)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "customer-refund": {
      "title": "04-01 고객 환불 확인서",
      "file": "forms/04-01_form_customer-refund.html",
      "inject_extra": {
        "document-id": { "type": "string", "desc": "RAL-{storeId}-YYYYMMDD-001" },
        "customer-name": { "type": "string", "desc": "실명 우선" }
      },
      "collect": {
        "description": "사유·금액·동의 등",
        "fields": ["document-id", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "document-id": { "type": "string", "desc": "문서 ID RAL-{storeId}-YYYYMMDD-001 (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 실명 (주입값 유지)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "appointment-cancellation-waiver": {
      "title": "04-02 예약 취소 면제서",
      "file": "forms/04-02_form_appointment-cancellation-waiver.html",
      "inject_extra": {
        "document-id": { "type": "string", "desc": "TCEL-{storeId}-YYYYMMDD-001" },
        "customer-name": { "type": "string", "desc": "실명 우선" }
      },
      "collect": {
        "description": "동의·서명",
        "fields": ["document-id", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "document-id": { "type": "string", "desc": "문서 ID TCEL-{storeId}-YYYYMMDD-001 (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 실명 (주입값 유지)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "product-exchange-delivery": {
      "title": "04-03 교환 제품 배송 확인서",
      "file": "forms/04-03_form_product-exchange-delivery.html",
      "inject_extra": {
        "document-id": { "type": "string", "desc": "DC-{storeId}-YYYYMMDD-001" },
        "customer-name": { "type": "string", "desc": "실명 우선" }
      },
      "collect": {
        "description": "교환·배송 정보·동의",
        "fields": ["document-id", "customer-name", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "document-id": { "type": "string", "desc": "문서 ID DC-{storeId}-YYYYMMDD-001 (주입값 유지)" },
          "customer-name": { "type": "string", "desc": "고객명 실명 (주입값 유지)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    },
    "authorization-letter": {
      "title": "05-01 위임장",
      "file": "forms/05-01_form_authorization-letter.html",
      "inject_extra": {
        "document-id": { "type": "string", "desc": "AL-{storeId}-YYYYMMDD-001" },
        "delegator-name": { "type": "string", "desc": "위임자명 (실명 우선)" },
        "delegator-membership-no": { "type": "string", "desc": "위임자 회원번호" },
        "delegator-title": { "type": "string", "desc": "위임자 호칭" },
        "delegator-country-code": { "type": "string", "desc": "위임자 국가번호" },
        "delegator-contact": { "type": "string", "desc": "위임자 연락처" },
        "delegator-email": { "type": "string", "desc": "위임자 이메일" },
        "delegatee-candidates": { "type": "array", "desc": "피위임자 후보 [{ id, name, phone, countryCode }]" },
        "validity-start": { "type": "string", "desc": "유효기간 시작 (YYYY-MM-DD)" },
        "validity-end": { "type": "string", "desc": "유효기간 종료 (YYYY-MM-DD)" }
      },
      "collect": {
        "description": "피위임자·위임 범위·유효기간·동의",
        "fields": ["document-id", "store-registration", "responsible-staff", "delegator-name", "delegator-membership-no", "delegator-contact", "delegator-email", "delegatee-name", "delegatee-name-2", "delegatee-contact", "validity-start", "validity-end", "scope-other", "confirmation-checkbox", "signature-image", "signature-date", "signature-time"],
        "fieldSpecs": {
          "document-id": { "type": "string", "desc": "문서 ID AL-{storeId}-YYYYMMDD-001 (주입값 유지)" },
          "store-registration": { "type": "string", "desc": "매장명 (주입값 유지)" },
          "responsible-staff": { "type": "string", "desc": "담당 BC (주입값 유지)" },
          "delegator-name": { "type": "string", "desc": "위임자명 실명 (주입값 유지)" },
          "delegator-membership-no": { "type": "string", "desc": "위임자 회원번호 (주입값 유지)" },
          "delegator-contact": { "type": "string", "desc": "위임자 연락처 (주입값 유지)" },
          "delegator-email": { "type": "string", "desc": "위임자 이메일 (주입값 유지)" },
          "delegatee-name": { "type": "string", "desc": "피위임자 이름 (화면 선택)" },
          "delegatee-name-2": { "type": "string", "desc": "피위임자 이름2 (동일인 시)" },
          "delegatee-contact": { "type": "string", "desc": "피위임자 연락처 (화면 입력)" },
          "validity-start": { "type": "string", "desc": "유효기간 시작 YYYY-MM-DD (화면 날짜)" },
          "validity-end": { "type": "string", "desc": "유효기간 종료 YYYY-MM-DD (화면 날짜)" },
          "scope-other": { "type": "string", "desc": "위임 범위 기타 (화면 입력)" },
          "confirmation-checkbox": { "type": "boolean", "desc": "동의 확인 (필수 체크)" },
          "signature-image": { "type": "string", "desc": "서명 이미지 base64" },
          "signature-date": { "type": "string", "desc": "서명일 (시스템 생성)" },
          "signature-time": { "type": "string", "desc": "서명 시각 (시스템 생성)" }
        }
      }
    }
  }
}
